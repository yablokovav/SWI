# SWI

## Описание
Программный модуль предназначен для обработки сейсмических данных методом SWI (Surface Waves Inversion) – инверсии поверхностных волн. Этот модуль представляет собой комплексный инструмент, который охватывает все этапы обработки данных, необходимые для построения 2D и 3D скоростных моделей S-волны верхней части геологического разреза.

Обработка данных организована в виде последовательности взаимосвязанных подмодулей, каждый из которых выполняет определенную функцию:
  - Препроцессинг: выполняет предварительную обработку сейсмических данных, включая выборку трасс, разделение сейсмограмм, отбраковку по качеству (SNR), регуляризацию, и подготовку данных к дальнейшему анализу. Предобработанные данные сохраняются в формате SEGY для контроля качества.
  - Спектральный анализ: анализирует спектральные характеристики сейсмических данных с целью извлечения дисперсионных кривых. Реализованы два подхода к расчету V-f изображения, дополнение нулями для улучшения разрешения, автоматическое извлечение дисперсионных кривых различными методами. Полученные спектральные изображения и дисперсионные кривые сохраняются в форматах SEGY и PNG.
  - Инверсия: выполняет обращение извлеченных дисперсионных кривых для построения одномерных моделей скорости S-волн. Предусмотрено три алгоритма инверсии: Оккама (локальная оптимизация), GWO и SSA (глобальная оптимизация). Восстановленные скоростные модели и дисперсионные кривые сохраняются в формате PNG для контроля качества.
  - Постпроцессинг: выполняет постобработку полученных скоростных моделей, включая отбраковку моделей, интерполяцию, сглаживание, заполнение пропусков и сохранение результатов в форматах SEGY и FDM. Для контроля качества изображения интерполированных скоростных моделей сохраняются в формате HTML.

В прикрепленном руководстве подробно описаны функциональные возможности модуля, требования к входным данным, последовательность действий при обработке параметры, влияющие на результат обработки на каждом этапе. Изучение данного руководства позволит пользователям эффективно использовать модуль для построения 2D и 3D скоростных моделей S-волн, оптимизируя параметры обработки и достигая наилучших результатов.



## Установка
1. Скачайте архив:
   - в Windows - распакуйте с помощью файлового менеджера(необходим 7-Zip или WinRar) или через терминал:
   ```PowerShell
   "C:\Program Files\7-Zip\7z.exe" x SWI-main.7z
   ```
   замените "C:\Program Files\7-Zip\7z.exe" на свой путь до исполняемого файла 7-Zip при необходимости
   - в Linux - для успешной установки необходимы следующие компонент:
        - 7-Zip;
        - build-essential;
        - tk-dev;
        - libffi-dev;
        - tcl-dev;
        - libssl-dev(для установки дополнительных библиотек при необходимости).
   
   распакуйте архив:
   ```bash
   unzip SWI-main.zip
   ```

2. Перейдите в директорию проекта:
   ```bash
   cd SWI-main
   ```

3. Установите питон:
   - в Windows - зайдите в директорию packages_for_windows:
   ```PowerShell
   cd packages_for_windows
   ```
   зуапустите файл python-3.10.11-amd64.exe:
   ```PowerShell
   python-3.10.11-amd64.exe /quiet InstallAllUsers=1 AssociateFiles=1 Include_doc=1 Include_pip=1 Include_test=0 AddPythonToPath=1       InstallDir="C:\Users\<User>\AppData\Local\Programs\Python\Python310"
   ```
   перезпустите терминал
   - в Linux  - зайдите в директорию packages_for_linux:
   ```PowerShell
   cd packages_for_linux
   ```
   распакуйте архив Python-3.10.11.tgz:
   ```bash
   tar -xzf Python-3.10.11.tgz
   ```
   перейтиде в распакованный каталог
   ```bash
   cd Python-3.10.11
   ```
   сконфигурируйте сбрку:
   ```bash
   ./configure --prefix=/opt/python3.10 --enable-optimizations
   ```
   соберите python
   ```bash
   make -j$(nproc)
   ```
   установите python
   ```bash
   sudo mkdir -p /opt/python3.10
   sudo chown $USER:$USER /opt/python3.10
   sudo make install
   ```
   добавьте в PATH:
   - откройте файл ~/.bashrc (или ~/.bash_profile, ~/.zshrc) и добавьте следующие строки в конец файла:
   ```bash
   export PATH="/opt/python3.10/bin:$PATH"
   export LD_LIBRARY_PATH="/opt/python3.10/lib:$LD_LIBRARY_PATH"
   ```
   - сохраните файл и обновите оболочку:
   ```bash
   source ~/.bashrc  # Или source ~/.bash_profile, source ~/.zshrc
   ```
4. Проверка установки: 
   - в Windows:
   ```PowerShell
   python --version
   ```
   - в Linux:
   ```bash
   python3.10 --version
   ```
   должна отобразится версия 3.10.11

5. В каталоге с проектом создайте виртуальную среду Python:
   - в Windows:
   ```PowerShell
   python -m venv <venv_name>
   ```
   - в Linux:
   ```
   python3.10 -m venv <venv_name>
   ```
7. Активируте виртуальную среду:
   - в Windows:
   ```PowerShell
   <venv_name>\Scripts\activate
   ```
   - в Linux:
   ```bash
   source <venv_name>/bin/activate
   ```
8. Установите все необходимые пакеты из локального каталога:
   - в Windows:
   ```PowerShell
   pip install --no-index --find-links=./packages_for_windows -r .\requirements_for_windows.txt
   ```
   - в Linux:
   ```bash
   pip install --no-index --find-links=./packages_for_linux -r requirements_for_linux.txt
   ```

## Запуск обработки
Запуск обработки по этапам осуществляется через команду python 

1. Запуск препроцессинга и спектрального анализа:
   ```bash
   python _1_preprocessing_spectral_run.py
   ```
2. Запуск инверсии:
     ```bash
     poetry _2_inversion_run.py
     ```
2. Запуск постпроцессинга:
     ```bash
     poetry _3_postprocessing_run.py
     ```
